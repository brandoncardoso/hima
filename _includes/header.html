{%- assign default_paths = site.pages | map: "path" -%}
{%- assign page_paths = site.header_pages | default: default_paths -%}
{%- assign titles_size = site.pages | map: 'title' | join: '' | size -%}

<div class="header">
  <div class="header__container">
    <div class="header__title">
      {{ site.title }}
    </div>

    {%- if titles_size > 0 -%}
    <nav class="header__nav">
      <ul>
      {%- for path in page_paths -%}
        {%- assign page = site.pages | where: "path", path | first -%}
        {%- if page.title -%}
        <li class="header__link">
          <a href="{{ page.url | relative_url }}">{{ page.title | escape }}</a>
        </li>
        {%- endif -%}
      {%- endfor -%}
      </ul>
    </nav>
    {%- endif -%}
  </div>
</div>
